(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{"+W4/":function(e,a,t){e.exports={tableList:"antd-pro-pages-gateway-flow-flow-tableList",tableListOperator:"antd-pro-pages-gateway-flow-flow-tableListOperator",tableListForm:"antd-pro-pages-gateway-flow-flow-tableListForm",submitButtons:"antd-pro-pages-gateway-flow-flow-submitButtons",tableListFormAdd:"antd-pro-pages-gateway-flow-flow-tableListFormAdd"}},"BE+S":function(e,a,t){"use strict";t.r(a);var l,r,n,i,o=t("jehZ"),s=t.n(o),c=(t("IzEo"),t("bx4M")),u=(t("g9YV"),t("wCAj")),p=t("p0pE"),d=t.n(p),m=(t("+L6B"),t("2/Rp")),h=(t("7Kak"),t("9yH6")),f=(t("14J3"),t("BMrR")),y=(t("jCWc"),t("kPKH")),v=(t("O3gP"),t("lrIw")),g=(t("miYZ"),t("tsqr")),E=(t("/zsF"),t("PArb")),b=t("2Taf"),w=t.n(b),k=t("vZ4D"),F=t.n(k),C=t("l4Ni"),V=t.n(C),L=t("ujKo"),D=t.n(L),S=t("MhPg"),O=t.n(S),R=(t("OaEy"),t("2fM7")),A=(t("2qtc"),t("kLXV")),x=(t("y8nQ"),t("Vl3Y")),q=t("q1tI"),U=t.n(q),G=t("MuoO"),I=(t("wd/R"),t("zHco")),M=(t("Pwec"),t("CtXQ")),_=(t("giR+"),t("fyUT")),T=(t("5NDa"),t("5rEg")),N=t("BSQV"),P=t.n(N),Z=R["a"].Option,B=(R["a"].OptGroup,T["a"].TextArea,x["a"].Item),Q=function(e){function a(e){var t;w()(this,a),t=V()(this,D()(a).call(this,e)),t.state={result:[],resultE:[]},t.remove=function(e,a){var l=t.props.form;if("f"==e){var r=l.getFieldValue("keys");if(0===r.length)return;r.splice(a,1),l.setFieldsValue({keys:r})}else if("m"==e){var n=l.getFieldValue("keys2");if(0===n.length)return;n.splice(a,1),l.setFieldsValue({keys2:n})}},t.add=function(e){var a=t.props.form;if("f"==e){var l=a.getFieldValue("keys"),r=l.concat("");a.setFieldsValue({keys:r})}else if("m"==e){var n=a.getFieldValue("keys2"),i=n.concat("");a.setFieldsValue({keys2:i})}};var l=t.props.value;return console.log(l),t}return O()(a,e),F()(a,[{key:"componentWillReceiveProps",value:function(e,a){this.setState({result:e.serviceDate.map(function(e){return"".concat(e)})}),this.setState({resultE:e.entryDate.map(function(e){return"".concat(e)})})}},{key:"render",value:function(){var e=this,a=this.props,t=a.modalVisible,l=a.form,r=a.handleUpdate,n=a.handleModalVisible,i=a.value,o=a.appDate,s=a.groupDate,c=a.handleService,u=a.handleEntry,p=this.props.form,d=p.getFieldDecorator,f=(p.getFieldValue,function(a){"*"===a?e.setState({result:[]}):c(a,!1)}),y=this.state.result.map(function(e){return U.a.createElement(v["a"].Option,{key:e,value:e},e)}),g=function(a){var t=l.getFieldValue("service");console.log(e.props),"*"===a||"*"===t?e.setState({resultE:[]}):u(t,a)},E=this.state.resultE.map(function(e){return U.a.createElement(v["a"].Option,{key:e,value:e},e)}),b=null,w=null,k=[];k.push(U.a.createElement(Z,{value:""},"\u5168\u90e8")),void 0!=o&&o[0]>0&&o[1].forEach(function(e,a){k.push(U.a.createElement(Z,{key:e._id},e._id))});var F=[];F.push(U.a.createElement(Z,{value:""},"\u5168\u90e8")),void 0!=o&&s.length>0&&s.forEach(function(e,a){F.push(U.a.createElement(Z,{key:e},e))});var C=function(a){var t=e.props.value;l.validateFields(function(e,a){e||(a.id=t._id,r(a),l.resetFields())})},V=function(e){var a=e.target.value;l.setFieldsValue({enabled:a})};return null==b&&(l.getFieldDecorator("keys",{initialValue:i.forward}),b=l.getFieldValue("keys")),null==w&&(l.getFieldDecorator("keys2",{initialValue:i.mirror}),w=l.getFieldValue("keys2")),console.log("keys",b),console.log("keys2",w),U.a.createElement(A["a"],{destroyOnClose:!0,title:"\u8bf7\u6c42\u8f6c\u53d1\u8be6\u60c5",visible:t,onOk:C,onCancel:function(){return n()},width:"800px"},U.a.createElement("div",{className:P.a.tableListForm},U.a.createElement(B,{labelCol:{span:8},wrapperCol:{span:13},label:"\u7f51\u5173\u5206\u7ec4"},d("group",{initialValue:void 0!=i.group?i.group:"",rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u5e94\u7528\u540d\u5b57\uff01"}]})(U.a.createElement(R["a"],{style:{width:"100%"}},F))),U.a.createElement(B,{labelCol:{span:8},wrapperCol:{span:13},label:"\u5e94\u7528"},l.getFieldDecorator("app",{rules:[{required:!1,message:"\u5e94\u7528!"}],initialValue:void 0!=i.app?i.app:""})(U.a.createElement(R["a"],{style:{width:"100%"},placeholder:""},k))),U.a.createElement(B,{labelCol:{span:8},wrapperCol:{span:13},label:"\u5fae\u670d\u52a1"},l.getFieldDecorator("service",{initialValue:i.service,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5fae\u670d\u52a1"}]})(U.a.createElement(v["a"],{style:{width:200},onSearch:f,onFocus:f},y))),U.a.createElement(B,{labelCol:{span:8},wrapperCol:{span:13},label:"\u63a5\u53e3"},l.getFieldDecorator("entry",{initialValue:i.entry,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u63a5\u53e3"}]})(U.a.createElement(v["a"],{style:{width:200},onSearch:g,onFocus:g},E))),U.a.createElement(B,{labelCol:{span:8},wrapperCol:{span:13},label:"\u8bf7\u6c42\u6bd4\u4f8b"},l.getFieldDecorator("rate",{initialValue:i.rate,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8bf7\u6c42\u6bd4\u4f8b"}]})(U.a.createElement(_["a"],{min:1,max:100}))),U.a.createElement(B,{labelCol:{span:8},wrapperCol:{span:13},label:"\u5206\u6d41\u7684\u76ee\u6807\u7f51\u5173\u7684URL(\u5faa\u73af\u8f6c\u53d1)"},U.a.createElement(m["a"],{type:"dashed",onClick:function(){return e.add("f")},style:{width:"60%"}},U.a.createElement(M["a"],{type:"plus"})," \u589e\u52a0\u9879")),b.map(function(a,t){return U.a.createElement(x["a"].Item,{labelCol:{span:8},wrapperCol:{span:13},label:"URL".concat(t+1),required:!1,key:a+""+t},l.getFieldDecorator("forward[".concat(t,"]"),{initialValue:a,validateTrigger:["onChange","onBlur"],rules:[{required:!1,whitespace:!0,message:"\u8bf7\u8f93\u5165URL\u6216\u8005\u5220\u9664\u6b64\u9879"}]})(U.a.createElement(T["a"],{placeholder:"\u5206\u6d41\u7684\u76ee\u6807\u7f51\u5173\u7684URL",style:{width:"60%",marginRight:8}})),b.length>=1?U.a.createElement(M["a"],{className:"dynamic-delete-button",type:"minus-circle-o",onClick:function(){return e.remove("f",t)}}):null)}),U.a.createElement(B,{labelCol:{span:8},wrapperCol:{span:13},label:"\u955c\u50cf\u7684\u76ee\u6807\u7f51\u5173\u7684URL(\u4f9d\u6b21\u8f6c\u53d1)"},U.a.createElement(m["a"],{type:"dashed",onClick:function(){return e.add("m")},style:{width:"60%"}},U.a.createElement(M["a"],{type:"plus"})," \u589e\u52a0\u9879")),w.map(function(a,t){return U.a.createElement(x["a"].Item,{labelCol:{span:8},wrapperCol:{span:13},label:"URL".concat(t+1),required:!1,key:a+""+t},l.getFieldDecorator("mirror[".concat(t,"]"),{initialValue:a,validateTrigger:["onChange","onBlur"],rules:[{required:!1,whitespace:!0,message:"\u8bf7\u8f93\u5165URL\u6216\u8005\u5220\u9664\u6b64\u9879"}]})(U.a.createElement(T["a"],{placeholder:"\u5206\u6d41\u7684\u76ee\u6807\u7f51\u5173\u7684URL",style:{width:"60%",marginRight:8}})),w.length>=1?U.a.createElement(M["a"],{className:"dynamic-delete-button",type:"minus-circle-o",onClick:function(){return e.remove("m",t)}}):null)}),U.a.createElement(B,{labelCol:{span:8},wrapperCol:{span:13},label:"\u53ef\u7528\u72b6\u6001"},l.getFieldDecorator("enabled",{initialValue:i.enabled})(U.a.createElement(h["a"].Group,{onChange:V},U.a.createElement(h["a"],{value:!0},"\u6b63\u5e38"),U.a.createElement(h["a"],{value:!1},"\u505c\u7528"))))))}}]),a}(q["PureComponent"]),W=x["a"].create()(Q),j=R["a"].Option,z=(R["a"].OptGroup,T["a"].TextArea,x["a"].Item),J=0,H=0,K=function(e){function a(e){var t;return w()(this,a),t=V()(this,D()(a).call(this,e)),t.state={result:[],resultE:[]},t}return O()(a,e),F()(a,[{key:"componentWillReceiveProps",value:function(e,a){console.log(e),this.setState({result:e.serviceDate.map(function(e){return"".concat(e)})}),this.setState({resultE:e.entryDate.map(function(e){return"".concat(e)})})}},{key:"render",value:function(){var e=this;console.log(this.props);var a=this.props,t=a.modalVisible,l=a.form,r=a.handleAdd,n=a.handleModalVisible,i=a.appDate,o=a.groupDate,s=(a.serviceDate,a.entryDate,a.handleService),c=a.handleEntry,u=function(a){"*"===a?e.setState({result:[]}):s(a,!1)},p=this.state.result.map(function(e){return U.a.createElement(v["a"].Option,{key:e,value:e},e)}),d=function(a){var t=l.getFieldValue("service");console.log(e.props),"*"===a||"*"===t?e.setState({resultE:[]}):c(t,a)},f=this.state.resultE.map(function(e){return U.a.createElement(v["a"].Option,{key:e,value:e},e)}),y=[];y.push(U.a.createElement(j,{value:""},"\u5168\u90e8")),void 0!=i&&i[0]>0&&i[1].forEach(function(e,a){y.push(U.a.createElement(j,{value:e._id},e._id))});var g=[];g.push(U.a.createElement(j,{value:""},"\u5168\u90e8")),void 0!=o&&o.length>0&&o.forEach(function(e,a){g.push(U.a.createElement(j,{value:e},e))});var E=function(){l.validateFields(function(e,a){e||(l.resetFields(),r(a))})},b=function(e){var a=e.target.value;l.setFieldsValue({enabledAdd:a})},w=function(e,a){if("f"==e){var t=l.getFieldValue("keys");if(1===t.length)return;l.setFieldsValue({keys:t.filter(function(e){return e!==a})})}else if("m"==e){var r=l.getFieldValue("keys2");if(1===r.length)return;l.setFieldsValue({keys2:r.filter(function(e){return e!==a})})}},k=function(e){if("f"==e){var a=l.getFieldValue("keys"),t=a.concat(J++);l.setFieldsValue({keys:t})}else if("m"==e){var r=l.getFieldValue("keys2"),n=r.concat(H++);l.setFieldsValue({keys2:n})}};l.getFieldDecorator("keys",{initialValue:[]});var F=l.getFieldValue("keys");l.getFieldDecorator("keys2",{initialValue:[]});var C=l.getFieldValue("keys2");return U.a.createElement(A["a"],{destroyOnClose:!0,title:"\u589e\u52a0\u8f6c\u53d1",visible:t,onOk:E,onCancel:function(){return n()},width:"800px"},U.a.createElement("div",{className:P.a.tableListFormAdd},U.a.createElement(z,{labelCol:{span:8},wrapperCol:{span:13},label:"\u7f51\u5173\u5206\u7ec4"},l.getFieldDecorator("group",{initialValue:"",rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u7f51\u5173\u5206\u7ec4\uff01"}]})(U.a.createElement(R["a"],{style:{width:"100%"}},g))),U.a.createElement(z,{labelCol:{span:8},wrapperCol:{span:13},label:"\u5e94\u7528"},l.getFieldDecorator("app",{initialValue:"",rules:[{required:!1,message:"\u5e94\u7528!"}]})(U.a.createElement(R["a"],{style:{width:"100%"}},y))),U.a.createElement(z,{labelCol:{span:8},wrapperCol:{span:13},label:"\u5fae\u670d\u52a1"},l.getFieldDecorator("service",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5fae\u670d\u52a1\uff01\u5168\u90e8\u5199*"}]})(U.a.createElement(v["a"],{style:{width:200},placeholder:"*\u4e3a\u5168\u90e8",onSearch:u,onFocus:u},p))),U.a.createElement(z,{labelCol:{span:8},wrapperCol:{span:13},label:"\u63a5\u53e3"},l.getFieldDecorator("entry",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u63a5\u53e3\uff01\u5168\u90e8\u5199*"}]})(U.a.createElement(v["a"],{style:{width:200},placeholder:"*\u4e3a\u5168\u90e8",onSearch:d,onFocus:d},f))),U.a.createElement(z,{labelCol:{span:8},wrapperCol:{span:13},label:"\u8f6c\u53d1\u6bd4\u4f8b(%)"},l.getFieldDecorator("rate",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8f6c\u53d1\u6bd4\u4f8b"}]})(U.a.createElement(_["a"],{min:1,max:100}))),U.a.createElement(z,{labelCol:{span:8},wrapperCol:{span:13},label:"\u5206\u6d41\u7684\u76ee\u6807\u7f51\u5173\u7684URL(\u5faa\u73af\u8f6c\u53d1)"},U.a.createElement(m["a"],{type:"dashed",onClick:function(){return k("f")},style:{width:"60%"}},U.a.createElement(M["a"],{type:"plus"})," \u589e\u52a0\u9879")),F.map(function(e,a){return U.a.createElement(x["a"].Item,{labelCol:{span:8},wrapperCol:{span:13},label:"URL".concat(a+1),required:!1,key:e},l.getFieldDecorator("forward[".concat(e,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!1,whitespace:!0,message:"\u8bf7\u8f93\u5165URL\u6216\u8005\u5220\u9664\u6b64\u9879"}]})(U.a.createElement(T["a"],{placeholder:"\u5206\u6d41\u7684\u76ee\u6807\u7f51\u5173\u7684URL",style:{width:"60%",marginRight:8}})),F.length>1?U.a.createElement(M["a"],{className:"dynamic-delete-button",type:"minus-circle-o",onClick:function(){return w("f",e)}}):null)}),U.a.createElement(z,{labelCol:{span:8},wrapperCol:{span:13},label:"\u955c\u50cf\u7684\u76ee\u6807\u7f51\u5173\u7684URL(\u4f9d\u6b21\u8f6c\u53d1)"},U.a.createElement(m["a"],{type:"dashed",onClick:function(){return k("m")},style:{width:"60%"}},U.a.createElement(M["a"],{type:"plus"})," \u589e\u52a0\u9879")),C.map(function(e,a){return U.a.createElement(x["a"].Item,{labelCol:{span:8},wrapperCol:{span:13},label:"URL".concat(a+1),required:!1,key:e},l.getFieldDecorator("mirror[".concat(e,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!1,whitespace:!0,message:"\u8bf7\u8f93\u5165URL\u6216\u8005\u5220\u9664\u6b64\u9879"}]})(U.a.createElement(T["a"],{placeholder:"\u5206\u6d41\u7684\u76ee\u6807\u7f51\u5173\u7684URL",style:{width:"60%",marginRight:8}})),C.length>1?U.a.createElement(M["a"],{className:"dynamic-delete-button",type:"minus-circle-o",onClick:function(){return w("m",e)}}):null)}),U.a.createElement(z,{labelCol:{span:8},wrapperCol:{span:13},label:"\u53ef\u7528\u72b6\u6001"},l.getFieldDecorator("enabledAdd",{initialValue:!0})(U.a.createElement(h["a"].Group,{onChange:b},U.a.createElement(h["a"],{value:!0},"\u6b63\u5e38"),U.a.createElement(h["a"],{value:!1},"\u505c\u7528"))))))}}]),a}(q["PureComponent"]),X=x["a"].create()(K),Y=t("+W4/"),$=t.n(Y),ee=t("P4xi"),ae=t("6Hmz"),te=ae["a"].WGGL_QQZFGZGL_ZJXLGZ.key,le=ae["a"].WGGL_QQZFGZGL_DEL.key,re=ae["a"].WGGL_QQZFGZGL_DETAIL.key,ne=x["a"].Item,ie=A["a"].confirm,oe=R["a"].Option,se=[],ce=(l=Object(G["connect"])(function(e){var a=e.flow,t=e.loading;return{flow:a,loading:t.models.flow}}),r=x["a"].create(),l(n=r((i=function(e){function a(){var e,t;w()(this,a);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return t=V()(this,(e=D()(a)).call.apply(e,[this].concat(r))),t.state={modalVisible:!1,formValues:{},options:[],modalVisible2:!1,appOpt:[],groupOpt:[],dataList:[],applist:[],groupList:[],entryList:[],serviceList:[]},t.columns=[{title:"\u7f51\u5173\u5206\u7ec4",dataIndex:"group",width:"8%",render:function(e){return e?U.a.createElement("span",null,e):U.a.createElement("span",null,"\u5168\u90e8")}},{title:"\u5e94\u7528",dataIndex:"app",width:"8%",render:function(e){return e?U.a.createElement("span",null,e):U.a.createElement("span",null,"\u5168\u90e8")}},{title:"\u5fae\u670d\u52a1",dataIndex:"service",width:"14%"},{title:"\u63a5\u53e3",dataIndex:"entry",width:"14%"},{title:"\u8bf7\u6c42\u6bd4\u4f8b(%)",dataIndex:"rate",width:"9%"},{title:"\u5206\u6d41\u7684URL(\u5faa\u73af\u8f6c\u53d1)",dataIndex:"forward",width:"15%",render:function(e){if(e)return U.a.createElement("div",null,e.map(function(e){return U.a.createElement("div",null,e)}))}},{title:"\u955c\u50cf\u7684URL(\u4f9d\u6b21\u8f6c\u53d1)",dataIndex:"mirror",width:"15%",render:function(e){if(e)return U.a.createElement("div",null,e.map(function(e){return U.a.createElement("div",null,e)}))}},{title:"\u53ef\u7528\u72b6\u6001",dataIndex:"enabled",width:"8%",render:function(e){return e?U.a.createElement("span",null,"\u6b63\u5e38"):U.a.createElement("span",null,"\u505c\u7528")}},{title:"\u64cd\u4f5c",width:"9%",render:function(e){return U.a.createElement("span",null,U.a.createElement("a",{href:"javaSrcipt:;",onClick:function(a){a&&a.preventDefault(),ee["a"].checkAuthAndExecute(t.props.dispatch,le,function(){return t.handleMenuClick(e._id)},[])}},"\u5220\u9664"),U.a.createElement(E["a"],{type:"vertical"}),U.a.createElement("a",{href:"javaSrcipt:;",onClick:function(a){a&&a.preventDefault(),ee["a"].checkAuthAndExecute(t.props.dispatch,re,function(){return t.handleModalVisible2(!0,e)},[])}},"\u8be6\u60c5"))}}],t.handleFormReset=function(){var e=t.props,a=e.form,l=e.dispatch;a.resetFields(),t.setState({formValues:{}});var r=new Array;r=["group",-1,"app",-1,"service",-1],l({type:"flow/fetch",payload:{group:null,app:null,enabled:null,service:null,sortby:r,limit:0,skip:0},callback:function(e){0===e.code&&t.setState({dataList:e.data})}})},t.handleMenuClick=function(e){var a=t.props,l=a.dispatch;a.form;ie({title:"\u786e\u8ba4\u64cd\u4f5c\u5c06\u5220\u9664\u5df2\u9009\u4e2d\u670d\u52a1\u8bf7\u6c42\u8f6c\u53d1\uff0c\u8bf7\u614e\u91cd\u9009\u62e9\u3002",okText:"\u786e\u8ba4",okType:"danger",cancelText:"\u653e\u5f03",onOk:function(){l({type:"flow/remove",payload:{id:e},callback:function(e){0===e.code?(g["a"].success("\u5220\u9664\u8bf7\u6c42\u8f6c\u53d1\u89c4\u5219\u6210\u529f\uff01"),t.handleFormReset()):g["a"].error("\u5220\u9664\u8bf7\u6c42\u8f6c\u53d1\u89c4\u5219\u5931\u8d25\uff01")}})},onCancel:function(){}})},t.handleSearch=function(e){e&&e.preventDefault();var a=t.props,l=a.dispatch,r=a.form;r.validateFields(function(e,a){if(!e){console.log(a);var r=new Array;r=["group",-1,"app",-1,"service",-1];var n={group:""==a.group?null:a.group,app:""==a.app?null:a.app,enabled:""==a.enabled?null:a.enabled,service:void 0==a.service?null:a.service,sortby:r,limit:0,skip:0};t.setState({formValues:n}),l({type:"flow/fetch",payload:n,callback:function(e){0===e.code?t.setState({dataList:e.data}):(g["a"].error("\u67e5\u8be2\u5217\u8868\u5931\u8d25\uff01"),t.setState({dataList:[]}))}})}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.handleModalVisible2=function(e,a){t.setState({modalVisible2:!!e,record:a})},t.handleAdd=function(e){var a=t.props.dispatch;t.state.formValues;console.log("===fields===",e);var l={_id:0};l.group=""==e.group?null:e.group,l.app=""==e.app?null:e.app,l.service=e.service,l.entry=e.entry,l.enabled=e.enabledAdd,l.forward=void 0===e.forward?[]:e.forward,l.mirror=void 0===e.mirror?[]:e.mirror,a({type:"flow/add",payload:{flow:l},callback:function(e){0===e.code?(g["a"].success("\u589e\u52a0\u8bf7\u6c42\u8f6c\u53d1\u89c4\u5219\u6210\u529f\uff01"),t.handleFormReset(),t.handleModalVisible()):g["a"].error("\u589e\u52a0\u8bf7\u6c42\u8f6c\u53d1\u89c4\u5219\u5931\u8d25\uff01")}})},t.handleUpdate=function(e){var a=t.props.dispatch,l=(t.state.formValues,{});l._id=e.id,l.group=""==e.group?null:e.group,l.app=""==e.app?null:e.app,l.service=e.service,l.entry=e.entry,l.enabled=e.enabled,l.forward=void 0===e.forward?[]:e.forward,l.mirror=void 0===e.mirror?[]:e.mirror,a({type:"flow/set",payload:{flow:l},callback:function(e){0===e.code?(g["a"].success("\u4fee\u6539\u8bf7\u6c42\u8f6c\u53d1\u89c4\u5219\u6210\u529f\uff01"),t.handleFormReset(),t.handleModalVisible2()):g["a"].success("\u4fee\u6539\u8bf7\u6c42\u8f6c\u53d1\u89c4\u5219\u5931\u8d25\uff01")}})},t.handleService=function(e,a){var l=t.props.dispatch;l({type:"flow/fetchService",payload:{name:void 0==e?null:e},callback:function(e){t.setState({serviceList:e.data}),a&&(se=e.data.map(function(e){return U.a.createElement(v["a"].Option,{key:"s"+e,value:e},e)}))}})},t.handleEntry=function(e,a){var l=t.props.dispatch;l({type:"flow/fetchEntry",payload:{entry:void 0==a?null:a},callback:function(e){t.setState({entryList:e.data})}})},t.setAppOpt=function(){t.props.flow.apps;var e=[],a=t.state.applist;e.push(U.a.createElement(oe,{value:"",key:"app"},"\u5168\u90e8")),void 0!=a&&a[0]>0&&a[1].forEach(function(a,t){e.push(U.a.createElement(oe,{key:a._id},a._id))}),t.setState({appOpt:e},function(){})},t.setGroupOpt=function(){t.props.flow.group;var e=[],a=t.state.groupList;e.push(U.a.createElement(oe,{value:"",key:"group"},"\u5168\u90e8")),void 0!=a&&a.length>0&&a.forEach(function(a,t){e.push(U.a.createElement(oe,{key:a},a))}),t.setState({groupOpt:e})},t}return O()(a,e),F()(a,[{key:"componentDidMount",value:function(){var e=this;this.setAppOpt(),this.setGroupOpt();var a=this.props.dispatch,t=new Array;t=["group",-1,"app",-1,"service",-1],a({type:"flow/fetch",payload:{group:null,app:null,enabled:null,service:null,sortby:t,limit:0,skip:0},callback:function(a){0===a.code&&e.setState({dataList:a.data})}});var l=new Array;l=["_id",1],a({type:"flow/fetchApp",payload:{name:null,sortby:l,tags:null,limit:0,skip:0,status:0},callback:function(a){console.log("===e223===",a),0===a.code&&e.setState({applist:a.data})}}),a({type:"flow/fetchGroupInFlow",callback:function(a){0===a.code&&e.setState({groupList:a.data})}})}},{key:"renderSimpleForm",value:function(){var e=this,a=this.props.form.getFieldDecorator,t=(this.state.options,function(a){"*"===a||e.handleService(a,!0),console.log(se)});return U.a.createElement(x["a"],{onSubmit:this.handleSearch,layout:"inline",onReset:this.handleFormReset},U.a.createElement(f["a"],{gutter:{md:8,lg:24,xl:48}},U.a.createElement(y["a"],{md:8,sm:24},U.a.createElement(ne,{labelCol:{span:5},wrapperCol:{span:18},label:"\u7f51\u5173\u5206\u7ec4"},a("group",{initialValue:"",rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u5e94\u7528\u540d\u5b57\uff01"}]})(U.a.createElement(R["a"],{style:{width:"100%"},onFocus:this.setGroupOpt},this.state.groupOpt)))),U.a.createElement(y["a"],{md:8,sm:24},U.a.createElement(ne,{label:"\u5e94\xa0\xa0\xa0\xa0\xa0\xa0\xa0\u7528"},a("app",{initialValue:"",rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u5e94\u7528\u540d\u5b57\uff01"}]})(U.a.createElement(R["a"],{style:{width:"100%"},onFocus:this.setAppOpt},this.state.appOpt))))),U.a.createElement(f["a"],{gutter:{md:8,lg:24,xl:48}},U.a.createElement(y["a"],{md:8,sm:24},U.a.createElement(ne,{label:"\u5fae\xa0\xa0\u670d\xa0\xa0\u52a1"},a("service",{})(U.a.createElement(v["a"],{style:{width:"100%"},onSearch:t,onFocus:t},se)))),U.a.createElement(y["a"],{md:8,sm:24},U.a.createElement(ne,{label:"\u53ef\u7528\u72b6\u6001"},a("enabled",{initialValue:null})(U.a.createElement(h["a"].Group,{onChange:this.onChangeEnabled},U.a.createElement(h["a"],{value:null,key:3},"\u4e0d\u9650"),U.a.createElement(h["a"],{value:"true",key:4},"\u6b63\u5e38"),U.a.createElement(h["a"],{value:"false",key:5},"\u505c\u7528"))))),U.a.createElement(y["a"],{md:8,sm:24},U.a.createElement("span",null,U.a.createElement(m["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")),U.a.createElement("span",{style:{margin:"10px"}},U.a.createElement(m["a"],{type:"primary",htmlType:"reset"},"\u91cd\u7f6e")))))}},{key:"renderForm",value:function(){return this.renderSimpleForm()}},{key:"render",value:function(){var e=this,a=this.props,t=a.flow,l=(t.data,t.pagination),r=a.loading,n=this.state,i=n.modalVisible,o=n.modalVisible2,p=n.record,h=n.dataList,f=n.applist,y=n.groupList,v=n.serviceList,g=n.entryList,E={handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible,appDate:f,groupDate:y,handleService:this.handleService,handleEntry:this.handleEntry,serviceDate:v,entryDate:g},b=d()({showSizeChanger:!0,showQuickJumper:!0},l);return U.a.createElement(I["a"],{title:"\u67e5\u8be2\u8868\u683c"},U.a.createElement(c["a"],{bordered:!1},U.a.createElement("div",{className:$.a.tableList},U.a.createElement("div",{className:$.a.tableListForm},this.renderForm()),U.a.createElement("div",{className:$.a.tableListOperator},U.a.createElement(m["a"],{icon:"plus",type:"primary",onClick:function(a){a&&a.preventDefault(),ee["a"].checkAuthAndExecute(e.props.dispatch,te,function(){return e.handleModalVisible(!0)},[])}},"\u589e\u52a0\u8f6c\u53d1\u89c4\u5219")),U.a.createElement(u["a"],{rowKey:"_id",loading:r,dataSource:void 0==h?[]:h[1],columns:this.columns,pagination:b,size:"small"}))),U.a.createElement(X,s()({},E,{modalVisible:i})),o?U.a.createElement(W,{handleUpdate:this.handleUpdate,value:p,handleModalVisible:this.handleModalVisible2,modalVisible:o,appDate:f,groupDate:y,handleService:this.handleService,handleEntry:this.handleEntry,serviceDate:v,entryDate:g}):null)}}]),a}(q["PureComponent"]),n=i))||n)||n);a["default"]=ce}}]);