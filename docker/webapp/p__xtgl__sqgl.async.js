(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[105],{"7TrO":function(e,_,t){"use strict";t("bbsP");var a,s,n,l=t("/wGt"),r=(t("g9YV"),t("wCAj")),o=(t("+L6B"),t("2/Rp")),i=(t("5NDa"),t("5rEg")),c=(t("+BJd"),t("mr32")),u=(t("qVdP"),t("jsC+")),d=(t("lUTK"),t("BvKs")),E=t("2Taf"),m=t.n(E),p=t("vZ4D"),g=t.n(p),h=t("l4Ni"),D=t.n(h),M=t("ujKo"),O=t.n(M),P=t("MhPg"),b=t.n(P),y=(t("OaEy"),t("2fM7")),f=(t("y8nQ"),t("Vl3Y")),C=t("q1tI"),U=t.n(C),T=t("MuoO"),A=t("ne2a"),k=t.n(A),I=t("jehZ"),R=t.n(I),B=t("p0pE"),L=t.n(B),K=(t("miYZ"),t("tsqr")),W=y["a"].Option,v=y["a"].OptGroup,x=(a=Object(T["connect"])(function(e){var _=e.tag2,t=e.loading;return{tag2:_,loading:t.models.tag2}}),a((n=function(e){function _(e){var t;m()(this,_),t=D()(this,O()(_).call(this,e)),t.initSelectData=function(e){var _=e.code,a=e.datas;if(_&&_>=200&&_<300){var s=a?a.tags:[];t.setState({tags:s})}else t.showMessage("\u9519\u8bef\uff1a\u83b7\u53d6select Tags\u5931\u8d25\uff01",1)},t.handleChange=function(e){t.setState({value:e}),t.triggerChange(e)},t.triggerChange=function(e){var _=t.props.onChange;_&&_(e)};var a=e.defaultValue||[],s=a||[];return a&&Array.isArray(a)&&a.length>0&&t.handleChange(a),t.state={defaultValue:a,value:s||[],tags:[]},t}return b()(_,e),g()(_,null,[{key:"getDerivedStateFromProps",value:function(e,_){var t,a=e.defaultValue;e.value;return a!=_.defaultValue&&(t||(t={},t.props={}),t.defaultValue=a,t.props.defaultValue=a),null}}]),g()(_,[{key:"componentDidMount",value:function(){var e=this,_=this.props,t=_.param,a=_.dispatch;if(t&&t.length>0){var s="";t&&Array.isArray(t)&&t.map(function(e,_){_==t.length-1?s+=e:s+=e+","});var n={env:s};try{a({type:"tag2/commonList",payload:n,callback:function(_){e.initSelectData(_)}})}catch(e){}}}},{key:"showMessage",value:function(e,_){_||(_=1),1===_?K["a"].error(e):2===_?K["a"].warning(e):3===_?K["a"].success(e):K["a"].error("\u9519\u8bef\uff1a\u9519\u8bef\u53c2\u6570\uff1alevel="+_)}},{key:"render",value:function(){var e=this.props,_=(e.name,e.size),t=e.style,a=(e.multiple,e.showArrow,e.width),s=e.disabled,n=this.state.defaultValue,l=this.state.tags,r={size:_||"default",style:L()({},t),width:a||"100%",mode:"multiple",placeholder:"\u8bf7\u9009\u62e9",disabled:s||!1},o=this.props.value;return U.a.createElement("div",null,U.a.createElement(y["a"],R()({},r,{onChange:this.handleChange,defaultValue:n||[],value:o,placeholder:"\u8bf7\u9009\u62e9"}),l?l.map(function(e){e._id,e.name;return U.a.createElement(v,{label:e.name,key:e._id},e.tagValue?e.tagValue.map(function(e){return U.a.createElement(W,{value:e.value,key:e.value},e.value)}):"")}):""))}}]),_}(C["Component"]),s=n))||s),w=x,S=f["a"].Item,q=y["a"].Option,j=function(e){function _(e){var t;return m()(this,_),t=D()(this,O()(_).call(this,e)),t.state={children:[],tagList:[]},t}return b()(_,e),g()(_,[{key:"componentDidMount",value:function(){var e=this,_=this.props,t=_.dispatch,a=_.authUsers;console.log(">>>>>>>> authUsers = ",a);var s=[];a.map(function(e){return s.push(e.id)}),this.setState({rows:a||[],selectedRowKeys:s}),console.log(">>>>>>>>>> this.state.rows = "+this.state.rows);var n=new Array;n.push("account",1),t({type:"common_yhgl/index",payload:{name:null,types:null,tags:null,roles:null,domain:"system",props:null,sortBy:n,skip:0,limit:0},callback:function(_){var t=_,a=[];t.map(function(e){a.push(U.a.createElement(q,{key:e},e))}),e.setState({tagList:a})}})}},{key:"showDxmb",value:function(){this.setState({dxmbListStaus:!0})}},{key:"handleChange",value:function(e){this.setState({children:e})}},{key:"changeList",value:function(){this.setState({dxmbListStaus:!1})}},{key:"getList",value:function(e){this.setState({dxmbListStaus:!1});var _=[];e.map(function(e){_.push(e.name)}),this.setState({children:_})}},{key:"handleSearch",value:function(){var e=this.props,_=e.form,t=e.dispatch,a=_.getFieldValue("yhm")?_.getFieldValue("yhm"):null,s=_.getFieldValue("mz")?_.getFieldValue("mz"):null,n=_.getFieldValue("bq")?_.getFieldValue("bq"):[],l={},r="$regex";if(null==a||"null"==a);else{var o={};o[r]=a,console.log("====_account===",o),l.account=o}var i=new Array;i.push("account",1),t({type:"common_yhgl/dem",payload:{limit:0,skip:0,name:null==s?null:"/"+s,tags:0===n.length?null:n,domain:"system",props:0===Object.keys(l).length?null:l,sortBy:i,roles:null,types:null}})}},{key:"handleFormReset",value:function(){var e=this.props,_=e.form,t=e.dispatch;_.resetFields();var a=new Array;a.push("account",1),t({type:"common_yhgl/index",payload:{name:null,types:null,tags:null,roles:null,domain:"system",props:null,sortBy:a,skip:0,limit:0}})}},{key:"render",value:function(){var e=this,_=this.props,t=_.form,a=_.data,s=_.yhglVisible,n=_.handleSelectedYhgl,E=_.handleYhglVisible,m=this.state,p=(m.dxmbListStaus,m.children,m.tagList,m.rows),g=(m.selectStaus,t.getFieldDecorator);console.log("===========rows ",p);var h={selectedRowKeys:this.state.selectedRowKeys,type:void 0===this.props.type?"checkbox":this.props.type,onChange:function(_,t){console.log("selectedRowKeys: ".concat(_),"selectedRows: ",t),console.log("========= selectedRows = ",t),e.setState({selectedRowKeys:_,rows:t})}},D=function(e){return U.a.createElement(d["a"],{style:{padding:"5px 10px"}},"\u68c0\u67e5\u5bf9\u8c61\u63cf\u8ff0\uff1a",e)},M=new Array;console.log("=======data===",a),a.map(function(e,_){"admin"==e.yname||M.push(e)}),console.log("=======datalist===",M);var O=[{title:"\u7528\u6237\u540d",dataIndex:"yname",key:"yname",align:"center"},{title:"\u59d3\u540d",dataIndex:"name",key:"name",align:"center",render:function(e,_){return U.a.createElement(u["a"],{overlay:D(_.spt)},U.a.createElement("span",null,e))}},{title:"\u7528\u6237\u6807\u7b7e",key:"tags",align:"center",dataIndex:"tags",render:function(e){return U.a.createElement("span",null,e.map(function(e){return U.a.createElement(c["a"],{color:"blue",key:e},e.toUpperCase())}))}}],P=function(_){n(e.state.rows)};return U.a.createElement("div",null,U.a.createElement(l["a"],{title:"\u7528\u6237\u5217\u8868",width:"50%",onClose:function(){return E()},visible:s,destroyOnClose:!0},U.a.createElement("div",{className:k.a.header},U.a.createElement(f["a"],{onSubmit:this.handleSearch,layout:"inline"},U.a.createElement("div",{className:k.a.search},U.a.createElement("div",null,U.a.createElement("div",{className:k.a.cols},U.a.createElement(S,{label:U.a.createElement("span",{style:{width:"60px",display:"inline-block"}},"\u7528\u6237\u540d")},g("yhm")(U.a.createElement(i["a"],{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",style:{width:300}}))),U.a.createElement(S,{label:U.a.createElement("span",{style:{width:"60px",display:"inline-block"}},"\u540d\u5b57")},g("mz")(U.a.createElement(i["a"],{placeholder:"\u8bf7\u8f93\u5165\u540d\u5b57",style:{width:300}})))),U.a.createElement("div",{className:k.a.cols},U.a.createElement(S,{label:U.a.createElement("span",{style:{width:"60px",display:"inline-block"}},"\u6807\u7b7e")},g("bq")(U.a.createElement(w,{style:{width:300},param:["dev"]}))),U.a.createElement("div",null,U.a.createElement("span",{className:k.a.submitButtons},U.a.createElement(o["a"],{type:"primary",onClick:this.handleSearch.bind(this)},"\u67e5\u8be2"),U.a.createElement(o["a"],{style:{marginLeft:8},onClick:this.handleFormReset.bind(this)},"\u91cd\u7f6e")))))))),U.a.createElement("div",null,U.a.createElement("div",null,U.a.createElement(r["a"],{rowKey:function(e){return e.id},rowSelection:h,columns:O,dataSource:M,size:"small"})),U.a.createElement("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},U.a.createElement(o["a"],{onClick:function(){return E()},style:{marginRight:8}},"\u53d6\u6d88"),U.a.createElement(o["a"],{onClick:P,type:"primary"},"\u786e\u5b9a")))))}}]),_}(C["Component"]);_["a"]=Object(T["connect"])(function(e){return e.common_yhgl})(f["a"].create()(j))},BRye:function(e,_,t){e.exports={content:"antd-pro-pages-xtgl-sqgl-index-content",btn:"antd-pro-pages-xtgl-sqgl-index-btn",checkList:"antd-pro-pages-xtgl-sqgl-index-checkList"}},lm1q:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var antd_es_table_style__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("g9YV"),antd_es_table__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("wCAj"),antd_es_form_style__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("y8nQ"),antd_es_form__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("Vl3Y"),antd_es_input_style__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("5NDa"),antd_es_input__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("5rEg"),antd_es_icon_style__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("Pwec"),antd_es_icon__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("CtXQ"),antd_es_button_style__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("+L6B"),antd_es_button__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("2/Rp"),antd_es_popconfirm_style__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("P2fV"),antd_es_popconfirm__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("NJEC"),_Users_xingxiangzheng_Desktop_ubsi_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("p0pE"),_Users_xingxiangzheng_Desktop_ubsi_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(_Users_xingxiangzheng_Desktop_ubsi_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_12__),_Users_xingxiangzheng_Desktop_ubsi_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("jehZ"),_Users_xingxiangzheng_Desktop_ubsi_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(_Users_xingxiangzheng_Desktop_ubsi_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_13__),antd_es_message_style__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("miYZ"),antd_es_message__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("tsqr"),_Users_xingxiangzheng_Desktop_ubsi_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("2Taf"),_Users_xingxiangzheng_Desktop_ubsi_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(_Users_xingxiangzheng_Desktop_ubsi_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_16__),_Users_xingxiangzheng_Desktop_ubsi_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("vZ4D"),_Users_xingxiangzheng_Desktop_ubsi_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(_Users_xingxiangzheng_Desktop_ubsi_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_17__),_Users_xingxiangzheng_Desktop_ubsi_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("l4Ni"),_Users_xingxiangzheng_Desktop_ubsi_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(_Users_xingxiangzheng_Desktop_ubsi_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_18__),_Users_xingxiangzheng_Desktop_ubsi_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("ujKo"),_Users_xingxiangzheng_Desktop_ubsi_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(_Users_xingxiangzheng_Desktop_ubsi_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_19__),_Users_xingxiangzheng_Desktop_ubsi_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("MhPg"),_Users_xingxiangzheng_Desktop_ubsi_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(_Users_xingxiangzheng_Desktop_ubsi_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_20__),antd_es_tree_style__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("ozfa"),antd_es_tree__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("MJZm"),antd_es_layout_style__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("B9cy"),antd_es_layout__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("Ol7k"),react__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("q1tI"),react__WEBPACK_IMPORTED_MODULE_25___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_25__),dva__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("MuoO"),dva__WEBPACK_IMPORTED_MODULE_26___default=__webpack_require__.n(dva__WEBPACK_IMPORTED_MODULE_26__),_index_less__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("BRye"),_index_less__WEBPACK_IMPORTED_MODULE_27___default=__webpack_require__.n(_index_less__WEBPACK_IMPORTED_MODULE_27__),_components_Yhgl__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("7TrO"),_pages_CommonUtils__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("P4xi"),_pages_Keys__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("6Hmz"),Content=antd_es_layout__WEBPACK_IMPORTED_MODULE_24__["a"].Content,Sider=antd_es_layout__WEBPACK_IMPORTED_MODULE_24__["a"].Sider,TreeNode=antd_es_tree__WEBPACK_IMPORTED_MODULE_22__["a"].TreeNode,keyUsers=_pages_Keys__WEBPACK_IMPORTED_MODULE_30__["a"].xtgl_sqgl_users.key,Sqgl=function(_Component){function Sqgl(){var e,_;_Users_xingxiangzheng_Desktop_ubsi_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_16___default()(this,Sqgl);for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return _=_Users_xingxiangzheng_Desktop_ubsi_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_18___default()(this,(e=_Users_xingxiangzheng_Desktop_ubsi_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_19___default()(Sqgl)).call.apply(e,[this].concat(a))),_.state={treeStatus:!1,tableStatus:!1,yhglVisible:"false",loadStatus:!0,treeID:[],jsStyle:[],treeChecked:[],jsArr:[],dataT:[],tree:[],node:""},_.submit=function(){var e=_.props.dispatch;if(_.state.treeStatus&&(_.state.isSet?e({type:"sqglModel/set",payload:{actions:"2",domain:"system",value:0,roles:_.state.jsStyle,aclId:_.state.treeChecked.join(",")},callback:function(t){0===t.code?(console.log(t),e({type:"sqglModel/getMsg",payload:{domain:"system",roles:_.state.jsStyle,targetIds:null},callback:function(e){0===e.code||antd_es_message__WEBPACK_IMPORTED_MODULE_15__["a"].error("\u5931\u8d25\uff0c\u539f\u56e0\u4e3a\uff1a".concat(t.message))}}),antd_es_message__WEBPACK_IMPORTED_MODULE_15__["a"].success("\u4fee\u6539\u6743\u9650\u6210\u529f\uff01")):antd_es_message__WEBPACK_IMPORTED_MODULE_15__["a"].error("\u5931\u8d25\uff0c\u539f\u56e0\u4e3a\uff1a".concat(t.message))}}):e({type:"sqglModel/submit",payload:{actions:"2",domain:"system",targetType:"menu",value:0,roles:_.state.jsStyle,targetId:_.state.treeChecked.join(",")},callback:function(t){0===t.code?(console.log(t),antd_es_message__WEBPACK_IMPORTED_MODULE_15__["a"].success("\u4fee\u6539\u6743\u9650\u6210\u529f\uff01"),e({type:"sqglModel/getMsg",payload:{domain:"system",roles:_.state.jsStyle,targetIds:null},callback:function(e){if(0===e.code){var a=e.data.length>0;_.setState({treeChecked:e.data,isSet:a})}else antd_es_message__WEBPACK_IMPORTED_MODULE_15__["a"].error("\u5931\u8d25\uff0c\u539f\u56e0\u4e3a\uff1a".concat(t.message))}})):antd_es_message__WEBPACK_IMPORTED_MODULE_15__["a"].error("\u5931\u8d25\uff0c\u539f\u56e0\u4e3a\uff1a".concat(t.message))}})),_.state.tableStatus){console.log(_.state.treeID),console.log(_.state.jsArr),_.setState({loadStatus:!0});var t=[];_.state.jsArr.map(function(e){t.push("R.".concat(e))}),_.state.isSet?e({type:"sqglModel/set",payload:{actions:"2",value:"0",roles:t.join(","),aclId:_.state.treeID.join(",")},callback:function(e){0===e.code?(console.log(e),antd_es_message__WEBPACK_IMPORTED_MODULE_15__["a"].success("\u4fee\u6539\u6743\u9650\u6210\u529f\uff01"),_.setState({loadStatus:!1})):antd_es_message__WEBPACK_IMPORTED_MODULE_15__["a"].error("\u5931\u8d25\uff0c\u539f\u56e0\u4e3a\uff1a".concat(e.message))}}):e({type:"sqglModel/submit",payload:{actions:"2",domain:"system",targetType:"menu",value:0,roles:t.join(","),targetId:_.state.treeID.join(",")},callback:function(e){0===e.code?(console.log(e),_.setState({loadStatus:!1}),antd_es_message__WEBPACK_IMPORTED_MODULE_15__["a"].success("\u4fee\u6539\u6743\u9650\u6210\u529f\uff01")):antd_es_message__WEBPACK_IMPORTED_MODULE_15__["a"].error("\u5931\u8d25\uff0c\u539f\u56e0\u4e3a\uff1a".concat(e.message))}})}},_.onSelect=function(e,t){t.selected&&_.setState({treeStatus:!1,tableStatus:!0,jsStyle:null,treeID:e,tableThree:!1,loadStatus:!0});var a=_.props.dispatch;a({type:"sqglModel/getMsg",payload:{domain:"system",targetIds:t.selected?e.join(","):_.state.treeID.join(","),roles:null},callback:function(e){if(0===e.code){var t=e.data.length>0;_.setState({jsArr:e.data,isSet:t,loadStatus:!1})}else antd_es_message__WEBPACK_IMPORTED_MODULE_15__["a"].error("\u5931\u8d25\uff0c\u539f\u56e0\u4e3a\uff1a".concat(e.message))}})},_.onCheck=function(e,t){_.setState({treeChecked:e})},_.getJs=function(e){console.log("====e=====",e),_.setState({jsStyle:e.node,treeStatus:!0,tableStatus:!1,tableThree:!0,tableThreeName:e.name,tableThreeNode:e.node,node:e.node});var t=_.props.dispatch,a=new Array;a.push("account",1);var s=new Array;s.push(e.node),t({type:"sqglModel/listUserByNode",payload:{name:null,types:null,tags:null,roles:s,domain:"system",props:null,sortBy:a,skip:0,limit:0},callback:function(t){if(console.log("=====272====",t),0===t.code){var a=[];t.data[1].map(function(e){a.push({key:e._id,account:e.account,name:e.name})}),_.setState({dataT:a,dataAu:a})}else antd_es_message__WEBPACK_IMPORTED_MODULE_15__["a"].error("\u5931\u8d25\uff0c\u539f\u56e0\u4e3a\uff1a".concat(e.message))}}),t({type:"sqglModel/getMsg",payload:{domain:"system",roles:e.node,targetIds:null},callback:function(e){if(0===e.code){var t=e.data.length>0;_.setState({treeChecked:e.data,isSet:t})}else antd_es_message__WEBPACK_IMPORTED_MODULE_15__["a"].error("\u5931\u8d25\uff0c\u539f\u56e0\u4e3a\uff1a".concat(e.message))}})},_.renderTreeNodes=function(e){return e.map(function(e){return e.children?react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement(TreeNode,{title:e.title,key:e.key,dataRef:e},_.renderTreeNodes(e.children)):react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement(TreeNode,_Users_xingxiangzheng_Desktop_ubsi_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_13___default()({key:e.key},e))})},_}return _Users_xingxiangzheng_Desktop_ubsi_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_20___default()(Sqgl,_Component),_Users_xingxiangzheng_Desktop_ubsi_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_17___default()(Sqgl,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this,dispatch=this.props.dispatch,url="/manifest.json";console.log("===msg===",url),fetch(url).then(function(e){return e.json()}).then(function(data){console.log("===data===",JSON.stringify(data));var reg=/[\r\n]/g,datas=JSON.stringify(data),datamenu=eval("("+datas+")"),tr=datamenu.menu;console.log("===tr===",tr),_this2.setState({tree:tr})}).catch(function(e){return console.log("Oops, error",e)}),dispatch({type:"sqglModel/getRoleTree",payload:{tags:null,depth:0,name:null,domain:"system"},callback:function(){_this2.setState({loadStatus:!1})}})}},{key:"cxjs",value:function(){var e=this.props,_=e.form,t=e.dispatch,a=_.getFieldValue("jsName")?_.getFieldValue("jsName"):null;t({type:"sqglModel/dem",payload:{tags:null,depth:0,name:a,domain:"system"}})}},{key:"cxjsReset",value:function(){var e=this,_=this.props,t=_.form,a=_.dispatch;t.resetFields(),a({type:"sqglModel/getRoleTree",payload:{tags:null,depth:0,name:null,domain:"system"},callback:function(){e.setState({loadStatus:!1})}})}},{key:"cxyh",value:function(){var e=this,_=this.props,t=_.form,a=_.dispatch,s=t.getFieldValue("yhName")?t.getFieldValue("yhName"):null,n="$regex",l={},r=new Array;if(r.push("account",1),null==s||"null"==s);else{var o={};o[n]=s,console.log("====_account===",o),l.account=o}a({type:"sqglModel/listUser",payload:{limit:0,skip:0,name:null,types:null,tags:null,roles:null,domain:"system",props:0===Object.keys(l).length?null:l,sortBy:r},callback:function(_){if(console.log("====380====",_),0===_.code){var t=[];_.data[1].map(function(e){t.push({key:e._id,account:e.account,name:e.name})}),e.setState({dataT:t})}else antd_es_message__WEBPACK_IMPORTED_MODULE_15__["a"].error("\u5931\u8d25\uff0c\u539f\u56e0\u4e3a\uff1a".concat(_.message))}})}},{key:"cxyhReset",value:function(){var e=this,_=this.props,t=_.form,a=_.dispatch;t.resetFields();var s=new Array;s.push("account",1);var n=new Array;n.push(this.state.tableThreeNode),a({type:"sqglModel/listUserByNode",payload:{name:null,types:null,tags:null,roles:n,domain:"system",props:null,sortBy:s,skip:0,limit:0},callback:function(_){if(0===_.code){var t=[];_.data[1].map(function(e){t.push({key:e._id,account:e.account,name:e.name})}),e.setState({dataT:t})}else antd_es_message__WEBPACK_IMPORTED_MODULE_15__["a"].error("\u5931\u8d25\uff0c\u539f\u56e0\u4e3a\uff1a".concat(_.message))}})}},{key:"confirm",value:function(e){var _=this,t=this.state.dataT.filter(function(_){return _!==e}),a=this.props.dispatch,s=[];t.map(function(e){s.push(e.key)}),a({type:"sqglModel/addUser",payload:{roleID:this.state.tableThreeNode,userID:s?s.join(","):null,domain:"system"},callback:function(e){if(0===e.code){var t=new Array;t.push("account",1);var s=new Array;s.push(_.state.tableThreeNode),antd_es_message__WEBPACK_IMPORTED_MODULE_15__["a"].success("\u5220\u9664\u7528\u6237\u6210\u529f"),a({type:"sqglModel/listUserByNode",payload:{name:null,types:null,tags:null,roles:s,domain:"system",props:null,sortBy:t,skip:0,limit:0},callback:function(t){if(0===e.code){var a=[];t.data[1].map(function(e){a.push({key:e._id,account:e.account,name:e.name})}),_.setState({dataT:a})}else antd_es_message__WEBPACK_IMPORTED_MODULE_15__["a"].error("\u5931\u8d25\uff0c\u539f\u56e0\u4e3a\uff1a".concat(e.message))}})}else antd_es_message__WEBPACK_IMPORTED_MODULE_15__["a"].error("\u5220\u9664\u7528\u6237\u5931\u8d25,\u539f\u56e0\u4e3a\uff1a".concat(e.message))}})}},{key:"showYh",value:function(e){console.log("========authUsers = ",e),!e||e.length<1?e=[]:e.map(function(_,t){var a=_Users_xingxiangzheng_Desktop_ubsi_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_12___default()({id:_.key},_);e[t]=a}),console.log("========authUsers = ",e),this.setState({yhglVisible:"true",authUsers:e})}},{key:"getYhglMsg",value:function(e){var _=this,t=this.props.dispatch;this.setState({yhglVisible:"false"});var a=[];e.map(function(e){a.push(e.id)}),console.log("=====this.state.jsStyle===",this.state.jsStyle);var s=this.state.jsStyle;0!==s.length?t({type:"sqglModel/addUser",payload:{roleID:this.state.jsStyle,userID:a?a.join(","):null,domain:"system"},callback:function(e){if(0===e.code){antd_es_message__WEBPACK_IMPORTED_MODULE_15__["a"].success("\u6dfb\u52a0/\u4fee\u6539\u7528\u6237\u6210\u529f");var a=new Array;a.push("account",1);var s=new Array;s.push(_.state.jsStyle),t({type:"sqglModel/listUserByNode",payload:{name:null,types:null,tags:null,roles:s,domain:"system",props:null,sortBy:a,skip:0,limit:0},callback:function(t){if(0===e.code){var a=[];t.data[1].map(function(e){a.push({key:e._id,account:e.account,name:e.name})}),_.setState({dataT:a,dataAu:a})}else antd_es_message__WEBPACK_IMPORTED_MODULE_15__["a"].error("\u5931\u8d25\uff0c\u539f\u56e0\u4e3a\uff1a".concat(e.message))}})}else antd_es_message__WEBPACK_IMPORTED_MODULE_15__["a"].error("\u6dfb\u52a0/\u4fee\u6539\u7528\u6237\u5931\u8d25,\u539f\u56e0\u4e3a\uff1a".concat(e.message))}}):antd_es_message__WEBPACK_IMPORTED_MODULE_15__["a"].error("\u8bf7\u5148\u9009\u62e9\u89d2\u8272\uff01")}},{key:"close",value:function(){this.setState({yhglVisible:"false"})}},{key:"showYhTable",value:function(e){var _=this;console.log("showYhTable===========",e);var t=this.props.dispatch;this.setState({tableThree:!0,tableThreeName:e.name,tableThreeNode:e.node,jsStyle:e.node}),t({type:"sqglModel/listUserByNode",payload:{node:e.node},callback:function(e){if(0===e.code){console.log("====519----",e);var t=[];e.data[1].map(function(e){t.push({key:e._id,account:e.account,name:e.name})}),_.setState({dataT:t,dataAu:t})}else antd_es_message__WEBPACK_IMPORTED_MODULE_15__["a"].error("\u5931\u8d25\uff0c\u539f\u56e0\u4e3a\uff1a".concat(e.message))}})}},{key:"closeYhTable",value:function(){this.setState({tableThree:!1})}},{key:"render",value:function(){var e=this,_=this.props,t=_.form,a=_.jsList;console.log("===jsList===",a);var s=this.state,n=s.tableStatus,l=s.treeStatus,r=s.treeChecked,o=s.jsStyle,i=s.jsArr,c=(s.tableThree,s.dataT),u=s.dataAu,d=s.tree,E=s.tableThreeName,m=t.getFieldDecorator,p=[{title:"\u89d2\u8272",render:function(_){return react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement("a",{style:o===_.node?{color:"#fa541c"}:{color:"rgba(0,0,0,.65)"},onClick:function(t){t&&t.preventDefault(),_pages_CommonUtils__WEBPACK_IMPORTED_MODULE_29__["a"].checkAuthAndExecute(e.props.dispatch,keyUsers,e.getJs,[_])}},_.name)}}],g=[{title:"\u7528\u6237\u540d",align:"center",render:function(e){return react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement("span",null,e.account)}},{title:"\u59d3\u540d",align:"center",render:function(e){return react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement("span",null,e.name)}},{title:"\u64cd\u4f5c",align:"center",key:"action",render:function(_){return react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement(antd_es_popconfirm__WEBPACK_IMPORTED_MODULE_11__["a"],{title:"\u786e\u5b9a\u8981\u5220\u9664\u6b64\u7528\u6237?",onConfirm:e.confirm.bind(e,_),okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",disabled:"admin"==_.account},"admin"==_.account?react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement("a",{onClick:function(){return antd_es_message__WEBPACK_IMPORTED_MODULE_15__["a"].warning("\u8d85\u7ea7\u7528\u6237\u4e0d\u80fd\u5220\u9664\uff01")}},"\u5220\u9664"):react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement("a",{href:"javaSrcipt:;"},"\u5220\u9664")))}}],h={selectedRowKeys:i,onChange:function(_,t){e.setState({jsArr:_})},getCheckboxProps:function(e){return{disabled:"Disabled User"===e.name,name:e.name}}};return console.log(d),console.log("====dataAu===",this.state.dataAu),console.log("====dataT===",c),react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement("div",{style:{width:"100%",background:"#fff",marginBottom:".3%",display:"flex",justifyContent:"flex-start"}},react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement(antd_es_button__WEBPACK_IMPORTED_MODULE_9__["a"],{type:"primary",style:{margin:"5px",width:"20%"},onClick:this.submit.bind(this)},"\u63d0\u4ea4")),react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement("div",{className:_index_less__WEBPACK_IMPORTED_MODULE_27___default.a.content},react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement(antd_es_layout__WEBPACK_IMPORTED_MODULE_24__["a"],null,react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement(Sider,{width:300,style:{background:"#fff"}},react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement(antd_es_tree__WEBPACK_IMPORTED_MODULE_22__["a"],{checkable:l,showLine:!0,switcherIcon:react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement(antd_es_icon__WEBPACK_IMPORTED_MODULE_7__["a"],{type:"down"}),onSelect:this.onSelect,onCheck:this.onCheck,checkedKeys:r||[]},this.renderTreeNodes(d))),react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement(antd_es_layout__WEBPACK_IMPORTED_MODULE_24__["a"],{style:{padding:"0 5px"}},react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement(Content,{style:{background:"#fff",padding:24,margin:0,minHeight:280}},react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement("div",{style:{marginBottom:10}},react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_3__["a"],{style:{display:"flex",alignItems:"center"}},react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_3__["a"].Item,null,m("jsName")(react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_5__["a"],{placeholder:"\u8bf7\u8f93\u5165\u8981\u67e5\u8be2\u7684\u89d2\u8272\u540d",style:{width:170}}))),react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement("span",{className:_index_less__WEBPACK_IMPORTED_MODULE_27___default.a.submitButtons},react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement(antd_es_button__WEBPACK_IMPORTED_MODULE_9__["a"],{type:"primary",style:{margin:"0 10px"},onClick:this.cxjs.bind(this)},react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement(antd_es_icon__WEBPACK_IMPORTED_MODULE_7__["a"],{type:"search"})),react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement(antd_es_button__WEBPACK_IMPORTED_MODULE_9__["a"],{onClick:this.cxjsReset.bind(this)},react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement(antd_es_icon__WEBPACK_IMPORTED_MODULE_7__["a"],{type:"reload"}))))),react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement(antd_es_table__WEBPACK_IMPORTED_MODULE_1__["a"],{rowSelection:n?h:null,columns:p,dataSource:a,size:"small",loading:this.state.loadStatus})))),react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement(antd_es_layout__WEBPACK_IMPORTED_MODULE_24__["a"],{style:{padding:"0"}},react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement(Content,{style:{background:"#fff",padding:24,margin:0,minHeight:280}},react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement("div",{style:{marginBottom:10}},react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_3__["a"],{style:{display:"flex",alignItems:"center"}},react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_3__["a"].Item,null,m("yhName")(react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_5__["a"],{placeholder:"\u8bf7\u8f93\u5165\u8981\u67e5\u8be2\u7684\u7528\u6237\u540d",style:{width:170}}))),react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement("span",{className:_index_less__WEBPACK_IMPORTED_MODULE_27___default.a.submitButtons},react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement(antd_es_button__WEBPACK_IMPORTED_MODULE_9__["a"],{type:"primary",style:{margin:"0 10px"},onClick:this.cxyh.bind(this)},react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement(antd_es_icon__WEBPACK_IMPORTED_MODULE_7__["a"],{type:"search"})),react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement(antd_es_button__WEBPACK_IMPORTED_MODULE_9__["a"],{onClick:this.cxyhReset.bind(this)},react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement(antd_es_icon__WEBPACK_IMPORTED_MODULE_7__["a"],{type:"reload"})))),react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement("div",{style:{display:"flex",justifyContent:" space-between",alignItems:"center"}},react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement("span",null,"\u6240\u5c5e\u89d2\u8272\uff1a"),react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement("span",null,E)),react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement(antd_es_button__WEBPACK_IMPORTED_MODULE_9__["a"],{style:{margin:"5px 0 2px"},onClick:this.showYh.bind(this,u),disabled:""==E||void 0==E||"undefined"==E||"system"==this.state.node},"\u6dfb\u52a0/\u4fee\u6539\u7528\u6237"))),react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement(antd_es_table__WEBPACK_IMPORTED_MODULE_1__["a"],{columns:g,dataSource:c,size:"small"})))))),"true"==this.state.yhglVisible?react__WEBPACK_IMPORTED_MODULE_25___default.a.createElement(_components_Yhgl__WEBPACK_IMPORTED_MODULE_28__["a"],{yhglVisible:this.state.yhglVisible,authUsers:this.state.authUsers||[],handleSelectedYhgl:this.getYhglMsg.bind(this),handleYhglVisible:this.close.bind(this)}):null)}}]),Sqgl}(react__WEBPACK_IMPORTED_MODULE_25__["Component"]);__webpack_exports__["default"]=Object(dva__WEBPACK_IMPORTED_MODULE_26__["connect"])(function(e){return e.sqglModel})(antd_es_form__WEBPACK_IMPORTED_MODULE_3__["a"].create()(Sqgl))},ne2a:function(e,_,t){e.exports={header:"antd-pro-pages-xtgl-sqgl-components-yhgl-header",search:"antd-pro-pages-xtgl-sqgl-components-yhgl-search",cols:"antd-pro-pages-xtgl-sqgl-components-yhgl-cols",content:"antd-pro-pages-xtgl-sqgl-components-yhgl-content",btns:"antd-pro-pages-xtgl-sqgl-components-yhgl-btns",modelMsg:"antd-pro-pages-xtgl-sqgl-components-yhgl-modelMsg",check:"antd-pro-pages-xtgl-sqgl-components-yhgl-check",arrow:"antd-pro-pages-xtgl-sqgl-components-yhgl-arrow"}}}]);