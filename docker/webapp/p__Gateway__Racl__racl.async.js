(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[21],{"5p9s":function(e,a,t){"use strict";t.r(a);var l,r,n,o,i=t("jehZ"),s=t.n(i),p=(t("IzEo"),t("bx4M")),c=(t("g9YV"),t("wCAj")),u=t("p0pE"),d=t.n(u),m=(t("+L6B"),t("2/Rp")),h=(t("14J3"),t("BMrR")),g=(t("jCWc"),t("kPKH")),E=(t("miYZ"),t("tsqr")),b=(t("/zsF"),t("PArb")),v=(t("+BJd"),t("mr32")),f=t("2Taf"),y=t.n(f),k=t("vZ4D"),C=t.n(k),V=t("l4Ni"),F=t.n(V),w=t("ujKo"),A=t.n(w),L=t("MhPg"),D=t.n(L),O=(t("7Kak"),t("9yH6")),S=(t("5NDa"),t("5rEg")),G=(t("OaEy"),t("2fM7")),M=(t("2qtc"),t("kLXV")),x=(t("y8nQ"),t("Vl3Y")),_=t("q1tI"),q=t.n(_),I=t("MuoO"),J=(t("wd/R"),t("3a4m")),R=t.n(J),N=t("zHco"),T=t("BSQV"),Z=t.n(T),j=G["a"].Option,Y=(G["a"].OptGroup,S["a"].TextArea,x["a"].Item),z=function(e){function a(e){var t;y()(this,a),t=F()(this,A()(a).call(this,e));var l=t.props.value;return console.log(l),t}return D()(a,e),C()(a,[{key:"render",value:function(){var e=this,a=this.props,t=a.modalVisible,l=a.form,r=a.handleUpdate,n=a.handleModalVisible,o=a.value,i=a.appDate,s=a.groupDate,p=[];void 0!=i&&i[0]>0&&i[1].forEach(function(e,a){p.push(q.a.createElement(j,{key:e._id},e._id))});var c=[];c.push(q.a.createElement(j,{value:""},"\u5168\u90e8")),void 0!=i&&s.length>0&&s.forEach(function(e,a){c.push(q.a.createElement(j,{key:e},e))});var u=function(a){var t=e.props.value;l.validateFields(function(e,a){e||(a.id=t._id,r(a),l.resetFields())})},d=function(e){var a=e.target.value;l.setFieldsValue({authAdd:a})},m=function(e){var a=e.target.value;l.setFieldsValue({enabledAdd:a})};return q.a.createElement(M["a"],{destroyOnClose:!0,title:"\u8fdc\u7a0b\u4e3b\u673a\u8be6\u60c5",visible:t,onOk:u,onCancel:function(){return n()},width:"640px"},q.a.createElement("div",{className:Z.a.tableListForm},q.a.createElement(Y,{labelCol:{span:5},wrapperCol:{span:15},label:"\u7f51\u5173\u5206\u7ec4"},l.getFieldDecorator("group",{initialValue:void 0==o.group?"":o.group,rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u7f51\u5173\u5206\u7ec4\uff01"}]})(q.a.createElement(G["a"],{style:{width:"100%"}},c))),q.a.createElement(Y,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5ba2\u6237\u4e3b\u673a"},l.getFieldDecorator("remote",{initialValue:o.remote,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8fdc\u7a0b\u4e3b\u673a\uff01"}]})(q.a.createElement(S["a"],{placeholder:"\u8bf7\u8f93\u5165"}))),q.a.createElement(Y,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5e94\u7528\u5217\u8868"},l.getFieldDecorator("apps",{rules:[{required:!1,message:"\u5e94\u7528\u5217\u8868!",type:"array"}],initialValue:"{}"!==JSON.stringify(o.apps)?o.apps:""})(q.a.createElement(G["a"],{mode:"multiple",style:{width:"100%"},placeholder:""},p))),q.a.createElement(Y,{labelCol:{span:5},wrapperCol:{span:18},label:"\u662f\u5426\u5141\u8bb8\u8bbf\u95ee"},l.getFieldDecorator("auth",{initialValue:o.auth})(q.a.createElement(O["a"].Group,{onChange:d},q.a.createElement(O["a"],{value:!0},"\u662f"),q.a.createElement(O["a"],{value:!1},"\u5426")))),q.a.createElement(Y,{labelCol:{span:5},wrapperCol:{span:18},label:"\u53ef\u7528\u72b6\u6001"},l.getFieldDecorator("enabled",{initialValue:o.enabled})(q.a.createElement(O["a"].Group,{onChange:m},q.a.createElement(O["a"],{value:!0},"\u6b63\u5e38"),q.a.createElement(O["a"],{value:!1},"\u505c\u7528"))))))}}]),a}(_["PureComponent"]),B=x["a"].create()(z),H=t("hoGH"),P=t.n(H),K=t("P4xi"),U=t("6Hmz"),W=U["a"].WGGL_YCZJGL_ZJYCZJ.key,Q=U["a"].WGGL_YCZJGL_DEL.key,X=U["a"].WGGL_YCZJGL_DETAIL.key,$=x["a"].Item,ee=M["a"].confirm,ae=G["a"].Option,te=x["a"].create()(function(e){var a=e.modalVisible,t=e.form,l=e.handleAdd,r=e.handleModalVisible,n=e.appDate,o=e.groupDate,i=[];i.push(q.a.createElement(ae,{key:"app",value:""},"\u5168\u90e8")),void 0!=n&&n[0]>0&&n[1].forEach(function(e,a){i.push(q.a.createElement(ae,{key:e._id},e._id))});var s=[];s.push(q.a.createElement(ae,{key:"group",value:""},"\u5168\u90e8")),void 0!=o&&o.length>0&&o.forEach(function(e,a){s.push(q.a.createElement(ae,{key:e},e))});var p=function(){t.validateFields(function(e,a){e||(t.resetFields(),l(a))})},c=function(e){var a=e.target.value;t.setFieldsValue({authAdd:a})},u=function(e){var a=e.target.value;t.setFieldsValue({enabledAdd:a})};return q.a.createElement(M["a"],{destroyOnClose:!0,title:"\u589e\u52a0\u8fdc\u7a0b\u4e3b\u673a",visible:a,onOk:p,onCancel:function(){return r()},width:"640px"},q.a.createElement("div",{className:Z.a.tableListFormAdd},q.a.createElement($,{labelCol:{span:5},wrapperCol:{span:18},label:"\u7f51\u5173\u5206\u7ec4"},t.getFieldDecorator("group",{initialValue:"",rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u7f51\u5173\u5206\u7ec4\uff01"}]})(q.a.createElement(G["a"],{style:{width:"100%"}},s))),q.a.createElement($,{labelCol:{span:5},wrapperCol:{span:18},label:"\u8fdc\u7a0b\u4e3b\u673a"},t.getFieldDecorator("remote",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8fdc\u7a0b\u4e3b\u673a\uff01"}]})(q.a.createElement(S["a"],{placeholder:""}))),q.a.createElement($,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5e94\u7528\u5217\u8868"},t.getFieldDecorator("apps",{rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u5e94\u7528!",type:"array"}]})(q.a.createElement(G["a"],{mode:"multiple",style:{width:"100%"},placeholder:""},i)),"\u4e0d\u586b\u5199\u4e3a\u5168\u90e8"),q.a.createElement($,{labelCol:{span:5},wrapperCol:{span:18},label:"\u8bbf\u95ee\u8bb8\u53ef"},t.getFieldDecorator("authAdd",{initialValue:!0})(q.a.createElement(O["a"].Group,{onChange:c},q.a.createElement(O["a"],{value:!0},"\u662f"),q.a.createElement(O["a"],{value:!1},"\u5426")))),q.a.createElement($,{labelCol:{span:5},wrapperCol:{span:18},label:"\u53ef\u7528\u72b6\u6001"},t.getFieldDecorator("enabledAdd",{initialValue:!0})(q.a.createElement(O["a"].Group,{onChange:u},q.a.createElement(O["a"],{value:!0},"\u6b63\u5e38"),q.a.createElement(O["a"],{value:!1},"\u505c\u7528"))))))}),le=(l=Object(I["connect"])(function(e){var a=e.racl,t=e.loading;return{racl:a,loading:t.models.racl}}),r=x["a"].create(),l(n=r((o=function(e){function a(){var e,t;y()(this,a);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return t=F()(this,(e=A()(a)).call.apply(e,[this].concat(r))),t.state={modalVisible:!1,formValues:{},options:[],modalVisible2:!1,data:[],apps:[],appOpt:[],groupOpt:[],auth:"",enabled:"",raclList:[],applist:[],groupList:[]},t.columns=[{title:"\u7f51\u5173\u5206\u7ec4",dataIndex:"group",align:"center",render:function(e){return e?q.a.createElement("span",null,e):q.a.createElement("span",null,"\u5168\u90e8")}},{title:"\u5ba2\u6237\u4e3b\u673a",dataIndex:"remote",align:"center"},{title:"\u5e94\u7528\u5217\u8868",dataIndex:"apps",align:"center",render:function(e){return e?q.a.createElement("span",null,e.map(function(e){return q.a.createElement(v["a"],{key:e},e)})):q.a.createElement("span",null,"\u5168\u90e8")}},{title:"\u8bbf\u95ee\u8bb8\u53ef",dataIndex:"auth",align:"center",render:function(e){return e?q.a.createElement("span",null,"\u662f"):q.a.createElement("span",null,"\u5426")}},{title:"\u53ef\u7528\u72b6\u6001",dataIndex:"enabled",align:"center",render:function(e){return e?q.a.createElement("span",null,"\u6b63\u5e38"):q.a.createElement("span",null,"\u505c\u7528")}},{title:"\u64cd\u4f5c",align:"center",render:function(e){return q.a.createElement("span",null,q.a.createElement("a",{href:"javaSrcipt:;",onClick:function(a){a&&a.preventDefault(),K["a"].checkAuthAndExecute(t.props.dispatch,Q,function(){return t.handleMenuClick(e._id)},[])}},"\u5220\u9664"),q.a.createElement(b["a"],{type:"vertical"}),q.a.createElement("a",{href:"javaSrcipt:;",onClick:function(a){a&&a.preventDefault(),K["a"].checkAuthAndExecute(t.props.dispatch,X,function(){return t.handleModalVisible2(!0,e)},[])}},"\u8be6\u60c5"))}}],t.previewItem=function(e){R.a.push("/profile/basic/".concat(e))},t.handleFormReset=function(){var e=t.props,a=e.form,l=e.dispatch;a.resetFields(),t.setState({formValues:{}});var r=new Array;r=["group",-1,"remote",-1],l({type:"racl/fetch",payload:{group:null,remote:null,app:null,enabled:null,auth:null,sortby:r,limit:0,skip:0},callback:function(e){0===e.code?t.setState({raclList:e.data}):E["a"].error("\u67e5\u8be2\u8fdc\u7a0b\u4e3b\u673a\u5217\u8868\u5931\u8d25\uff01")}})},t.handleMenuClick=function(e){var a=t.props,l=a.dispatch;a.form;console.log(t.state),ee({title:"\u786e\u8ba4\u64cd\u4f5c\u5c06\u5220\u9664\u5df2\u9009\u4e2d\u7684\u8fdc\u7a0b\u4e3b\u673a\u8bbf\u95ee\u6743\u9650\uff0c\u8bf7\u614e\u91cd\u9009\u62e9\u3002",okText:"\u786e\u8ba4",okType:"danger",cancelText:"\u653e\u5f03",onOk:function(){l({type:"racl/remove",payload:{id:e},callback:function(e){0===e.code?(E["a"].success("\u5220\u9664\u4e00\u4e2a\u8fdc\u7a0b\u4e3b\u673a\u7684\u8bbf\u95ee\u6743\u9650\u6210\u529f!"),t.handleFormReset()):E["a"].success("\u5220\u9664\u4e00\u4e2a\u8fdc\u7a0b\u4e3b\u673a\u7684\u8bbf\u95ee\u6743\u9650\u5931\u8d25!")}})},onCancel:function(){}})},t.handleSearch=function(e){e&&e.preventDefault();var a=new Array;a=["group",-1,"remote",-1];var l=t.props,r=l.dispatch,n=l.form;n.validateFields(function(e,l){if(!e){console.log("======453===",l);var n={group:""==l.group?null:l.group,remote:void 0==l.remote?null:l.remote,app:""==l.app?null:l.app,enabled:l.enabled,auth:l.auth,sortby:a,limit:0,skip:0};t.setState({formValues:n}),r({type:"racl/fetch",payload:n,callback:function(e){0===e.code?t.setState({raclList:e.data}):E["a"].error("\u67e5\u8be2\u8fdc\u7a0b\u4e3b\u673a\u5217\u8868\u5931\u8d25\uff01")}})}})},t.setAppOpt=function(){console.log(t.props.racl);t.props.racl.apps;var e=t.state.applist,a=[];a.push(q.a.createElement(ae,{value:"",key:"app"},"\u5168\u90e8")),void 0!=e&&e[0]>0&&e[1].forEach(function(e,t){a.push(q.a.createElement(ae,{value:e._id,key:"app"+t},e._id))}),t.setState({appOpt:a},function(){})},t.setGroupOpt=function(){t.props.racl.group;var e=t.state.groupList;console.log(t.props.racl);var a=[];a.push(q.a.createElement(ae,{value:"",key:"group"},"\u5168\u90e8")),void 0!=e&&e.length>0&&e.forEach(function(e,t){a.push(q.a.createElement(ae,{value:e,key:"group"+t},e))}),t.setState({groupOpt:a})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.handleModalVisible2=function(e,a){t.setState({modalVisible2:!!e,record:a})},t.handleAdd=function(e){var a=t.props.dispatch;t.state.formValues;a({type:"racl/add",payload:{id:0,group:void 0==e.group?null:e.group,apps:void 0==e.apps?null:e.apps,remote:void 0==e.remote?null:e.remote,auth:e.authAdd,enabled:e.enabledAdd},callback:function(e){0===e.code?(E["a"].success("\u589e\u52a0\u8fdc\u7a0b\u4e3b\u673a\u6210\u529f\uff01"),t.handleFormReset(),t.handleModalVisible()):E["a"].error("\u589e\u52a0\u8fdc\u7a0b\u4e3b\u673a\u5931\u8d25\uff01")}})},t.handleUpdate=function(e){var a=t.props.dispatch;t.state.formValues;a({type:"racl/set",payload:{id:e.id,group:"null"==e.group?null:e.group,apps:void 0==e.apps?null:e.apps,remote:void 0==e.remote?null:e.remote,auth:e.auth,enabled:e.enabled},callback:function(e){0===e.code?(E["a"].success("\u4fee\u6539\u8fdc\u7a0b\u4e3b\u673a\u6210\u529f\uff01"),t.handleFormReset(),t.handleModalVisible2()):E["a"].error("\u4fee\u6539\u8fdc\u7a0b\u4e3b\u673a\u5931\u8d25\uff01")}})},t.handleCancel2=function(e){t.setState({visible2:!1}),t.handleSearch(e)},t.handleCancel3=function(e){t.setState({visible3:!1}),t.handleSearch(e)},t.onChangeAuth=function(e){var a=t.props.form;a.setFieldsValue({auth:e.target.value})},t.onChangeEnabled=function(e){var a=t.props.form;a.setFieldsValue({enabled:e.target.value})},t}return D()(a,e),C()(a,[{key:"componentDidMount",value:function(){var e=this;this.setAppOpt(),this.setGroupOpt();var a=this.props.dispatch,t=this.props.racl,l=(t.apps,t.group,new Array);l=["group",-1,"remote",-1],a({type:"racl/fetch",payload:{group:null,remote:null,app:null,enabled:null,auth:null,sortby:l,limit:0,skip:0},callback:function(a){0===a.code?e.setState({raclList:a.data}):E["a"].error("\u67e5\u8be2\u8fdc\u7a0b\u4e3b\u673a\u5217\u8868\u5931\u8d25\uff01")}});var r=new Array;r=["_id",1],a({type:"racl/fetchApp",payload:{name:null,sortby:r,tags:null,limit:0,skip:0,status:0},callback:function(a){console.log("===e223===",a),0===a.code&&e.setState({applist:a.data})}}),a({type:"racl/fetchGroupInRAcl",callback:function(a){0===a.code&&e.setState({groupList:a.data})}})}},{key:"renderSimpleForm",value:function(e){var a=this.props.form.getFieldDecorator;return q.a.createElement(x["a"],{onSubmit:this.handleSearch,layout:"inline",onReset:this.handleFormReset},q.a.createElement(h["a"],{gutter:{md:8,lg:24,xl:48}},q.a.createElement(g["a"],{md:8,sm:24},q.a.createElement($,{labelCol:{span:5},wrapperCol:{span:18},label:"\u7f51\u5173\u5206\u7ec4"},a("group",{initialValue:"",rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u5e94\u7528\u540d\u5b57\uff01"}]})(q.a.createElement(G["a"],{style:{width:"100%"},onFocus:this.setGroupOpt},this.state.groupOpt)))),q.a.createElement(g["a"],{md:8,sm:24},q.a.createElement($,{label:"\u8fdc\u7a0b\u4e3b\u673a"},a("remote",{rules:[{required:!1,message:"\u5ba2\u6237\u4e3b\u673a!"}]})(q.a.createElement(S["a"],null)))),q.a.createElement(g["a"],{md:8,sm:24},q.a.createElement($,{label:"\u5e94\xa0\xa0\xa0\xa0\xa0\xa0\xa0\u7528"},a("app",{initialValue:"",rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u5e94\u7528\u540d\u5b57\uff01"}]})(q.a.createElement(G["a"],{style:{width:"100%"},onFocus:this.setAppOpt},this.state.appOpt))))),q.a.createElement(h["a"],{gutter:{md:8,lg:24,xl:48}},q.a.createElement(g["a"],{md:8,sm:24},q.a.createElement($,{label:"\u8bbf\u95ee\u8bb8\u53ef"},a("auth",{initialValue:null})(q.a.createElement(O["a"].Group,{onChange:this.onChangeAuth},q.a.createElement(O["a"],{value:null,key:0},"\u4e0d\u9650"),q.a.createElement(O["a"],{value:!0,key:1},"\u662f"),q.a.createElement(O["a"],{value:!1,key:2},"\u5426"))))),q.a.createElement(g["a"],{md:8,sm:24},q.a.createElement($,{label:"\u53ef\u7528\u72b6\u6001"},a("enabled",{initialValue:null})(q.a.createElement(O["a"].Group,{onChange:this.onChangeEnabled},q.a.createElement(O["a"],{value:null,key:3},"\u4e0d\u9650"),q.a.createElement(O["a"],{value:"true",key:4},"\u6b63\u5e38"),q.a.createElement(O["a"],{value:"false",key:5},"\u505c\u7528"))))),q.a.createElement(g["a"],{md:8,sm:24},q.a.createElement("span",null,q.a.createElement(m["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")),q.a.createElement("span",{style:{margin:"10px"}},q.a.createElement(m["a"],{type:"primary",htmlType:"reset"},"\u91cd\u7f6e")))))}},{key:"renderForm",value:function(e){return this.renderSimpleForm(e)}},{key:"render",value:function(){var e=this,a=this.props,t=a.racl,l=(t.data,t.pagination),r=a.loading,n=this.state,o=n.modalVisible,i=n.modalVisible2,u=n.record,h=n.raclList,g=n.applist,E=n.groupList,b={handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible,appDate:g,groupDate:E},v=d()({showSizeChanger:!0,showQuickJumper:!0},l);return q.a.createElement(N["a"],{title:"\u67e5\u8be2\u8868\u683c"},q.a.createElement(p["a"],{bordered:!1},q.a.createElement("div",{className:P.a.tableList},q.a.createElement("div",{className:P.a.tableListForm},this.renderForm(this.state)),q.a.createElement("div",{className:P.a.tableListOperator},q.a.createElement(m["a"],{icon:"plus",type:"primary",onClick:function(a){a&&a.preventDefault(),K["a"].checkAuthAndExecute(e.props.dispatch,W,function(){return e.handleModalVisible(!0)},[])}},"\u589e\u52a0\u8fdc\u7a0b\u4e3b\u673a")),q.a.createElement(c["a"],{rowKey:"_id",loading:r,dataSource:void 0==h?[]:h[1],columns:this.columns,pagination:v,size:"small"}))),q.a.createElement(te,s()({},b,{modalVisible:o})),i?q.a.createElement(B,{handleUpdate:this.handleUpdate,value:u,handleModalVisible:this.handleModalVisible2,appDate:g,groupDate:E,modalVisible:i}):null)}}]),a}(_["PureComponent"]),n=o))||n)||n);a["default"]=le},hoGH:function(e,a,t){e.exports={tableList:"antd-pro-pages-gateway-racl-racl-tableList",tableListOperator:"antd-pro-pages-gateway-racl-racl-tableListOperator",tableListForm:"antd-pro-pages-gateway-racl-racl-tableListForm",submitButtons:"antd-pro-pages-gateway-racl-racl-submitButtons",tableListFormAdd:"antd-pro-pages-gateway-racl-racl-tableListFormAdd"}}}]);