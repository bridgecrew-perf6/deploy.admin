(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[84],{"8LoG":function(e,a,t){e.exports={header:"antd-pro-pages-system-jsgl-index-header",search:"antd-pro-pages-system-jsgl-index-search",cols:"antd-pro-pages-system-jsgl-index-cols",content:"antd-pro-pages-system-jsgl-index-content",btns:"antd-pro-pages-system-jsgl-index-btns",modelMsg:"antd-pro-pages-system-jsgl-index-modelMsg",check:"antd-pro-pages-system-jsgl-index-check",arrow:"antd-pro-pages-system-jsgl-index-arrow"}},q9Ca:function(e,a,t){"use strict";t.r(a);t("2qtc");for(var l=t("kLXV"),n=(t("Pwec"),t("CtXQ")),s=(t("/zsF"),t("PArb")),i=(t("qVdP"),t("jsC+")),r=(t("lUTK"),t("BvKs")),c=(t("g9YV"),t("wCAj")),o=(t("+L6B"),t("2/Rp")),d=(t("P2fV"),t("NJEC")),m=(t("+BJd"),t("mr32")),u=(t("miYZ"),t("tsqr")),p=t("2Taf"),h=t.n(p),y=t("vZ4D"),g=t.n(y),E=t("l4Ni"),f=t.n(E),b=t("ujKo"),k=t.n(b),v=t("MhPg"),w=t.n(v),x=(t("5NDa"),t("5rEg")),j=(t("OaEy"),t("2fM7")),S=(t("y8nQ"),t("Vl3Y")),C=t("q1tI"),M=t.n(C),V=t("MuoO"),F=t("8LoG"),P=t.n(F),T=t("zcrV"),I=(t("n9xi"),t("IV+2"),S["a"].Item),N=j["a"].Option,Y=x["a"].TextArea,D=[],L=0;L<20;L++)D.push({key:L.toString(),title:"content".concat(L+1),description:"description of content".concat(L+1)});D.filter(function(e){return+e.key%3>1}).map(function(e){return e.key});var q=function(e){function a(){var e,t;h()(this,a);for(var l=arguments.length,n=new Array(l),s=0;s<l;s++)n[s]=arguments[s];return t=f()(this,(e=k()(a)).call.apply(e,[this].concat(n))),t.state={modelStaus:!1,modelTitle:"",modelType:"",modelContent:"",yh:[]},t}return w()(a,e),g()(a,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;console.log("====jsgl======"),e({type:"jsglModel/index"})}},{key:"showModel",value:function(e,a,t){var l=this;if(this.setState({modelStaus:!0,modelTitle:a,modelType:e,modelContent:t}),"02"===e){var n=this.props.dispatch;n({type:"jsglModel/listUserByNode",payload:{node:t.node},callback:function(e){var a=[];e.map(function(e){a.push({id:e._id,yname:e.account,name:e.name,roles:e.roles,tags:e.tags?e.tags:[],staus:e.status,spt:e.desc,email:e.email,phone:e.phone})}),l.setState({yh:a})}})}}},{key:"closeModel",value:function(){this.setState({modelStaus:!1,modelTitle:"",modelType:"",modelContent:""})}},{key:"handleSearch",value:function(){var e=this.props,a=e.form,t=e.dispatch,l=a.getFieldValue("name")?a.getFieldValue("name"):null,n=a.getFieldValue("tags")?a.getFieldValue("tags").join(","):null;t({type:"jsglModel/dem",payload:{depth:"0",name:l,domain:"system",tags:n}})}},{key:"handleFormReset",value:function(){var e=this.props,a=e.form,t=e.dispatch;a.resetFields(),t({type:"jsglModel/index"})}},{key:"showYhgl",value:function(){this.setState({yhglVisible:!0})}},{key:"handleChange",value:function(e){var a=this.state.yh.filter(function(a){return a!==e});this.setState({yh:a})}},{key:"getYhglMsg",value:function(e){this.setState({yhglVisible:!1}),this.setState({yh:e})}},{key:"close",value:function(){this.setState({yhglVisible:!1})}},{key:"render",value:function(){var e=this,a=this.props,t=a.form,p=a.data,h=a.tagslist,y=a.nameList,g=this.state,E=g.modelStaus,f=g.modelTitle,b=g.modelType,k=g.modelContent,v=g.yh,w=t.getFieldDecorator;console.log("====nameList====",y);var C=[];h.forEach(function(e){C.push(M.a.createElement(N,{key:e},e))});var V=function(){var a=e.props.dispatch,l=t.getFieldValue("nameP")?t.getFieldValue("nameP"):null,n=t.getFieldValue("sptP")?t.getFieldValue("sptP"):null,s=t.getFieldValue("tagsP")?t.getFieldValue("tagsP").join(","):null;if(null!==l){if("00"===b){if(y.includes(l))return u["a"].error("\u89d2\u8272\u540d\u79f0\u4e0d\u80fd\u91cd\u590d\uff01");a({type:"jsglModel/add",payload:{name:l,desc:n,tags:s},callback:function(a){200===a.code?(u["a"].success("\u589e\u52a0\u89d2\u8272\u6210\u529f"),e.handleSearch()):u["a"].error("\u589e\u52a0\u89d2\u8272\u5931\u8d25,\u539f\u56e0\u4e3a\uff1a".concat(a.message))}})}if("01"===b&&a({type:"jsglModel/set",payload:{roleID:k._id,name:l,desc:n,tags:s},callback:function(a){200===a.code?(u["a"].success("\u4fee\u6539\u89d2\u8272\u6210\u529f"),e.handleSearch()):u["a"].error("\u4fee\u6539\u89d2\u8272\u5931\u8d25,\u539f\u56e0\u4e3a\uff1a".concat(a.message))}}),"02"===b){var i=[];if(e.state.yh)for(var r=0;r<e.state.yh.length;r++)i.push(e.state.yh[r].id);a({type:"jsglModel/addUser",payload:{roleID:k.node,userID:i?i.join(","):null},callback:function(a){200===a.code?(u["a"].success("\u4fee\u6539\u89d2\u8272\u6210\u5458\u6210\u529f"),e.handleSearch()):u["a"].error("\u4fee\u6539\u89d2\u8272\u6210\u5458\u5931\u8d25,\u539f\u56e0\u4e3a\uff1a".concat(a.message))}})}"03"===b&&a({type:"jsglModel/del",payload:{domain:"system",node:k.node},callback:function(a){200===a.code?(u["a"].success("\u5220\u9664\u89d2\u8272\u6210\u529f"),e.handleSearch()):u["a"].error("\u5220\u9664\u89d2\u8272\u5931\u8d25,\u539f\u56e0\u4e3a\uff1a".concat(a.message))}}),"04"===b&&a({type:"jsglModel/addChilds",payload:{_id:k.node,name:l,desc:n,tags:s},callback:function(a){200===a.code?(u["a"].success("\u589e\u52a0\u5b50\u89d2\u8272\u6210\u529f"),e.handleSearch()):u["a"].error("\u589e\u52a0\u5b50\u89d2\u8272\u5931\u8d25,\u539f\u56e0\u4e3a\uff1a".concat(a.message))}}),e.setState({modelStaus:!1,modelTitle:"",modelType:"",modelContent:""})}else u["a"].error("\u89d2\u8272\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a")},F=[{title:"\u7528\u6237\u540d",dataIndex:"yname",key:"yname",align:"center"},{title:"\u59d3\u540d",dataIndex:"name",key:"name",align:"center"},{title:"\u7528\u6237\u6807\u7b7e",key:"tags",align:"center",dataIndex:"tags",render:function(e){return M.a.createElement("span",null,e?e.map(function(e){return M.a.createElement(m["a"],{color:"blue",key:e},e.toUpperCase())}):[])}},{title:"\u64cd\u4f5c",align:"center",key:"action",render:function(a){return M.a.createElement(d["a"],{title:"\u786e\u5b9a\u8981\u5220\u9664\u6b64\u7528\u6237?",onConfirm:e.handleChange.bind(e,a),okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},M.a.createElement("a",{href:"javaSrcipt:;"},"\u5220\u9664"))}}],D=M.a.createElement("div",{className:P.a.modelMsg},"03"===b?M.a.createElement("p",null,"\u8bf7\u5148\u5220\u9664\u8be5\u89d2\u8272\u7684\u4e0b\u5c5e\u89d2\u8272\u3002\u786e\u8ba4\u64cd\u4f5c\u5c06\u5220\u9664\u8be5\u90e8\u95e8\u7684\u6240\u6709\u76f8\u5173\u8bb0\u5f55\uff0c\u8bf7\u614e\u91cd\u9009\u62e9\u3002"):null,M.a.createElement(S["a"],{onSubmit:V},M.a.createElement(I,{label:M.a.createElement("span",{style:{width:"60px",display:"inline-block"}},"\u7236\u7ea7\u89d2\u8272")},w("fjjsP",{initialValue:"04"===b?k.name:k&&"00"!==b?k.parentNode:" "})(M.a.createElement(x["a"],{disabled:!0,style:{width:300}}))),M.a.createElement(I,{label:M.a.createElement("span",{style:{width:"70px",display:"inline-block"}},M.a.createElement("span",{style:{paddingRight:"10px",color:"red"}},"*"),"\u89d2\u8272\u540d\u79f0")},w("nameP",{rules:[{required:!0,message:"\u89d2\u8272\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:k&&"04"!==b?k.name:null})(M.a.createElement(x["a"],{disabled:!("03"!==b&&"02"!==b),placeholder:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d\u79f0",style:{width:300}}))),M.a.createElement(I,{label:M.a.createElement("span",{style:{width:"60px",display:"inline-block"}},"\u89d2\u8272\u63cf\u8ff0")},w("sptP",{initialValue:k&&"04"!==b?k.desc:null})(M.a.createElement(Y,{disabled:!("03"!==b&&"02"!==b),placeholder:"\u8bf7\u8f93\u5165\u89d2\u8272\u63cf\u8ff0",style:{width:300}}))),"03"===b||"02"===b?null:M.a.createElement(I,{label:M.a.createElement("span",{style:{width:"60px",display:"inline-block"}},"\u89d2\u8272\u6807\u7b7e")},w("tagsP",{initialValue:k&&"04"!==b?k.tags:[]})(M.a.createElement(j["a"],{mode:"tags",style:{width:"300px"},placeholder:"\u8bf7\u8f93\u5165\u6807\u7b7e\uff01",allowClear:!0},C),{})),"02"===b?M.a.createElement("div",null,M.a.createElement(I,{style:{marginRight:"42%"},label:M.a.createElement("span",{style:{width:"60px",display:"inline-block"}},"\u89d2\u8272\u6210\u5458")},M.a.createElement(o["a"],{type:"primary",size:"small",onClick:this.showYhgl.bind(this)},"\u9009\u62e9\u89d2\u8272\u6210\u5458")),M.a.createElement(c["a"],{columns:F,dataSource:v,size:"small"})):null)),L=function(e){return M.a.createElement(r["a"],{style:{padding:"5px 10px"}},"\u89d2\u8272\u63cf\u8ff0\uff1a",e)},q=function(a){return M.a.createElement(r["a"],null,M.a.createElement(r["a"].Item,null,M.a.createElement("span",{onClick:e.showModel.bind(e,"03","\u5220\u9664",a)},"\u5220\u9664")),M.a.createElement(r["a"].Item,null,M.a.createElement("span",{onClick:e.showModel.bind(e,"02","\u89d2\u8272\u6210\u5458",a)},"\u89d2\u8272\u6210\u5458")),M.a.createElement(r["a"].Item,null,M.a.createElement("span",{onClick:e.showModel.bind(e,"04","\u589e\u52a0\u5b50\u89d2\u8272",a)},"\u589e\u52a0\u5b50\u89d2\u8272")))},z=[{title:"\u89d2\u8272\u540d\u79f0",dataIndex:"name",key:"name",render:function(e,a){return M.a.createElement(i["a"],{overlay:L(a.desc)},M.a.createElement("span",null,e))}},{title:"\u89d2\u8272\u6807\u7b7e",key:"tags",align:"center",dataIndex:"tags",render:function(e){return e?M.a.createElement("span",null,e.map(function(e){return M.a.createElement(m["a"],{color:"blue",key:e},e.toUpperCase())})):null}},{title:"\u64cd\u4f5c",align:"center",key:"action",render:function(a){return M.a.createElement("span",null,M.a.createElement("a",{href:"javaSrcipt:;",onClick:e.showModel.bind(e,"01","\u8be6\u60c5",a)},"\u8be6\u60c5"),M.a.createElement(s["a"],{type:"vertical"}),M.a.createElement(i["a"],{overlay:q(a)},M.a.createElement(o["a"],{size:"small"},"\u64cd\u4f5c ",M.a.createElement(n["a"],{type:"down"}))))}}];return M.a.createElement("div",null,M.a.createElement("div",{className:P.a.header},M.a.createElement(S["a"],{onSubmit:this.handleSearch,layout:"inline"},M.a.createElement("div",{className:P.a.search},M.a.createElement("div",null,M.a.createElement("div",{className:P.a.cols},M.a.createElement(I,{label:M.a.createElement("span",{style:{width:"60px",display:"inline-block"}},"\u89d2\u8272\u540d\u79f0")},w("name")(M.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d\u79f0",style:{width:300}}))),M.a.createElement(I,{label:M.a.createElement("span",{style:{width:"60px",display:"inline-block"}},"\u89d2\u8272\u6807\u7b7e")},w("tags")(M.a.createElement(j["a"],{mode:"tags",style:{width:"300px"},placeholder:"\u8bf7\u8f93\u5165\u6807\u7b7e\uff01",allowClear:!0},C),{}))),M.a.createElement("div",{className:P.a.cols})),M.a.createElement("span",{className:P.a.submitButtons},M.a.createElement(o["a"],{type:"primary",onClick:this.handleSearch.bind(this)},"\u67e5\u8be2"),M.a.createElement(o["a"],{style:{marginLeft:8},onClick:this.handleFormReset.bind(this)},"\u91cd\u7f6e"))))),M.a.createElement("div",{className:P.a.content},M.a.createElement("div",{className:P.a.btns},M.a.createElement(o["a"],{type:"primary",onClick:this.showModel.bind(this,"00","\u589e\u52a0\u89d2\u8272",null)},M.a.createElement(n["a"],{type:"plus"}),"\u589e\u52a0\u89d2\u8272")),M.a.createElement("div",null,M.a.createElement(c["a"],{columns:z,dataSource:p,size:"small"}))),M.a.createElement(l["a"],{title:f,visible:E,onOk:V,onCancel:this.closeModel.bind(this),destroyOnClose:!0},M.a.createElement("div",{style:{margin:"0 auto"}},D)),M.a.createElement(T["a"],{yhglVisible:this.state.yhglVisible,handleSelectedYhgl:this.getYhglMsg.bind(this),handleYhglVisible:this.close.bind(this)}))}}]),a}(C["Component"]);a["default"]=Object(V["connect"])(function(e){return e.jsglModel})(S["a"].create()(q))}}]);